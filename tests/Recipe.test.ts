import Recipe from '@/Modules/Recipe'

const mockDOM = `
  <div class="recipe"><h4 class="heading04">おすすめのレシピ</h4><p class="letter">免疫⼒を維持する栄養素がたっぷり⼊った<br>1週間分の低カロリーレシピです。</p><div class="day-menu-button-wrapper"><dl class="day-menu-button is-monday fn-recipe-day-menu-button is-active" data-date="monday"><dt class="day">Mon</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-tuesday fn-recipe-day-menu-button" data-date="tuesday"><dt class="day">Tue</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-wednesday fn-recipe-day-menu-button" data-date="wednesday"><dt class="day">Wed</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-thursday fn-recipe-day-menu-button" data-date="thursday"><dt class="day">Thu</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-friday fn-recipe-day-menu-button" data-date="friday"><dt class="day">Fri</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-saturday fn-recipe-day-menu-button" data-date="saturday"><dt class="day">Sat</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl><dl class="day-menu-button is-sunday fn-recipe-day-menu-button" data-date="sunday"><dt class="day">Sun</dt><dd class="button-wrapper"><button class="button"></button></dd><dd class="allow"></dd></dl></div></div>
  <div class="recipe-menu"><div class="recipe-menu-inner fn-recipe-menu-inner is-active" data-date="monday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Mon<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="tuesday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Tue<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="wednesday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Wed<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="thursday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Thu<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="friday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Fri<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="saturday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Sat<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div><div class="recipe-menu-inner fn-recipe-menu-inner" data-date="sunday"><dl class="menu-main"><dt class="menu-main-heading">オイルサーディンのパン粉焼き Sun<dd class="mene-main-time">調理時間：15分<dd class="memu-main-image-wrapper"><img src="assets/images/recipe_image.jpg" alt="Image Recipe" class="memu-main-image"><dl class="calorie"><dt class="calorie-heading">カロリー<dd class="calorie-data">205<dd class="calorie-unit">kcal</dl></dl><dl class="menu-material"><dt class="menu-material-heading">材料（2人分）<dd class="menu-material-data"><span class="name">オイルサーディン</span> <span class="unit">1缶</span><dd class="menu-material-data"><span class="name">にんにく</span> <span class="unit">1片</span><dd class="menu-material-data"><span class="name">パン粉(乾)</span> <span class="unit">10g</span><dd class="menu-material-data"><span class="name">粉チーズ</span> <span class="unit">3g</span><dd class="menu-material-data"><span class="name">パセリ(みじん切り)</span> <span class="unit">6g</span><dd class="menu-material-data"><span class="name">塩、こしょう</span> <span class="unit">少々</span></dl><dl class="menu-maiking"><dt class="menu-maiking-heading">作り方<dd class="menu-maiking-data">ボウルに、パン粉、粉チーズ、パセリのみじん切り、塩、こしょうを入れて混ぜ合わせます。<dd class="menu-maiking-data">オイルサーディンの身だけ取り出し、耐熱皿に並べ、おろしたにんにくを上にぬります。<dd class="menu-maiking-data">②に①をのせて、オイルサーディンの油をまわしかけ、トースターで焼き目がつく程度(約5分)焼きます。<span class="notes">※オーブントースターでの加熱中、油が飛び跳ねて、やけどをする恐れがありますのでご注意下さい。</span></dl></div></div>
`

describe('Recipe', () => {
  it('Check Initialize', () => {
    document.body.innerHTML = mockDOM
    const recipe = new Recipe()
    recipe.init()

    Array.from(document.querySelectorAll('.fn-recipe-day-menu-button'), (selector): void => {
      if (selector.getAttribute('data-date') === recipe.today) {
        expect(selector.classList.contains('is-active')).toBe(true)
      }
    })

    Array.from(document.querySelectorAll('.fn-recipe-menu-inner'), (selector): void => {
      if (selector.getAttribute('data-date') === recipe.today) {
        expect(selector.classList.contains('is-active')).toBe(true)
      }
    })
  })

  it('Check Core', () => {
    document.body.innerHTML = mockDOM
    const recipe = new Recipe()
    recipe.core()

    Array.from(document.querySelectorAll('.fn-recipe-day-menu-button'), (selector, index): void => {
      selector.dispatchEvent(new Event('click'))
      Array.from(new Array(document.querySelectorAll('.fn-recipe-day-menu-button').length), (_selector, _index): void => {
        if (index !== _index) {
          expect(document.querySelectorAll('.fn-recipe-day-menu-button')[_index].classList.contains('is-active')).toBe(false)
        }
      })

      expect(selector.classList.contains('is-active')).toBe(true)

      const pickData = selector.getAttribute('data-date')

      Array.from(document.querySelectorAll('.fn-recipe-menu-inner'), (selector): void => {
        if (selector.getAttribute('data-date') === pickData) {
          expect(selector.classList.contains('is-active')).toBe(true)
        } else {
          expect(selector.classList.contains('is-active')).toBe(false)
        }
      })
    })
  })
})
